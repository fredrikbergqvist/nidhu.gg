"use strict";var b=this?.__classPrivateFieldGet||function(B,C,D,f){if(D==='a'&&!f)throw TypeError('Private accessor was defined without a getter');if(A(C)?B!==C||!f:!C.has(B))throw TypeError('Cannot read private member from an object whose class did not declare it');return D==='m'?f:D==='a'?f.call(B):f?f.value:C.get(B)},b=this?.__classPrivateFieldGet||function(aX,aY,aZ,f){if(aZ==='a'&&!f)throw TypeError('Private accessor was defined without a getter');if(A(aY)?aX!==aY||!f:!aY.has(aX))throw TypeError('Cannot read private member from an object whose class did not declare it');return aZ==='m'?f:aZ==='a'?f.call(aX):f?f.value:aY.get(aX)},A=a=>typeof a==='function';var c,d,e,_,g,h,i,j;class NidhuggBackToTop extends HTMLElement{constructor(){super();c.add(this);e.set(this,'nidhugg-back-to-top');_.set(this,'nidhugg-back-to-top__anchor');g.set(this,'nidhugg-scroll-to');h.set(this,CSS.supports('animation-timeline: scroll()'))}connectedCallback(){if(document.getElementById(b(this,e,'f')))return;document.body.appendChild(b(this,c,'m',j).call(this));b(this,c,'m',i).call(this)}}d=NidhuggBackToTop,e=new WeakMap,_=new WeakMap,g=new WeakMap,h=new WeakMap,c=new WeakSet,i=function _A(){if(!b(this,h,'f')){var _B=document.getElementById(b(this,g,'f')),_C=document.getElementById(b(this,e,'f'));if(!_B||!_C)return;var _D=window.innerHeight;var E=new IntersectionObserver(entries=>{for(const entry of entries){if(!entry.isIntersecting){_C.style.opacity='1'}else{_C.style.opacity='0'}}}, {root:null,rootMargin:`${_D}px`,threshold:1});E.observe(_B)}},j=function aI(){if(!this.getAttribute('scroll-to')||!b(this,h,'f')){var aJ=document.createElement('span');aJ.id=b(this,g,'f');this.prepend(aJ)}var aK=this.getAttribute('scroll-to')||b(this,g,'f'),aL=document.createElement('a');aL.innerHTML=`
			<figure>
				<svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24"><path d="M23.71,16.29,15.54,8.12a5,5,0,0,0-7.08,0L.29,16.29a1,1,0,0,0,1.42,1.42L9.88,9.54a3,3,0,0,1,4.24,0l8.17,8.17a1,1,0,0,0,1.42,0A1,1,0,0,0,23.71,16.29Z"/></svg>
				<figcaption>Back to top</figcaption>
			</figure>`;aL.href=`#${aK}`;aL.id=b(this,e,'f');aL.classList.add(b(this,_,'f'));b(this,h,'f')&&aL.classList.add('nidhugg-back-to-top__anchor--scroll-animation');return aL};NidhuggBackToTop.observedAttributes=['scroll-id'];(()=>customElements.define('nidhugg-back-to-top',d))();var b=this?.__classPrivateFieldGet||function(aM,aN,aO,f){if(aO==='a'&&!f)throw TypeError('Private accessor was defined without a getter');if(A(aN)?aM!==aN||!f:!aN.has(aM))throw TypeError('Cannot read private member from an object whose class did not declare it');return aO==='m'?f:aO==='a'?f.call(aM):f?f.value:aN.get(aM)};var l,d,m,n,o,p,q;class TextCountTracker extends HTMLElement{constructor(){super();l.add(this)}populateElements(){var aP=document.createElement('div');aP.id='characterCount';aP.classList.add('nidhugg-character-count');aP.textContent=`${b(this,l,'a',n)}${b(this,l,'a',p)?'/'+b(this,l,'a',p):''} characters`;this.append(aP);b(this,l,'a',m)?.addEventListener('input',b(this,l,'m',q).bind(this))}connectedCallback(){this.populateElements()}}d=TextCountTracker,l=new WeakSet,m=function aQ(){var aR=this.querySelector('textarea');if(aR)return aR;var aS=this.querySelector('input');if(aS)return aS;console.warn('No input or textarea element found to track text count')},n=function aT(){if(!b(this,l,'a',m))return 0;return b(this,l,'a',m).value.length},o=function aU(){return this.querySelector('#characterCount')},p=function aV(){return this.getAttribute('maxlength')},q=function aW(){if(!b(this,l,'a',o))return;b(this,l,'a',o).textContent=`${b(this,l,'a',n)}${b(this,l,'a',p)?'/'+b(this,l,'a',p):''} characters`};(()=>customElements.define('nidhugg-character-count',d))();TextCountTracker.observedAttributes=['maxlength'];export default TextCountTracker;var s,d,t,u,v,w,x,y,z,aA;class NidhuggImageModal extends HTMLElement{constructor(){super();s.add(this);t.set(this,'nidhugg-image-modal');u.set(this,`${b(this,t,'f')}__dialog`);v.set(this,`${b(this,t,'f')}__figure`);w.set(this,`${b(this,t,'f')}__img`);x.set(this,`${b(this,t,'f')}__caption`);y.set(this,'nidhugg-modal-open');this.close=this.close.bind(this);this.closeEvent=new CustomEvent('close', {bubbles:!0,cancelable:!1,composed:!0});this.cancelEvent=new CustomEvent('cancel', {bubbles:!0,cancelable:!1,composed:!0});this.openEvent=new CustomEvent('open', {bubbles:!0,cancelable:!1,composed:!0})}get Dialog(){return document.getElementById(b(this,t,'f'))}open(){this.showModal()}showModal(){var bA=this.Dialog;bA&&(bA.showModal(),document.body.classList.add(b(this,y,'f')))}close(){var bB=this.Dialog;bB&&(bB.style.opacity='0',bB.style.transform='scale(0)',setTimeout(()=>{document.body.classList.remove(b(this,y,'f'));bB.style.opacity=bB.style.transform='';bB.close()},200))}connectedCallback(){b(this,s,'m',aA).call(this);var bC=this.Dialog;bC===null||bC===void 0?void 0:bC.addEventListener('cancel',bE=>{bE.preventDefault();this.close()});bC===null||bC===void 0?void 0:bC.addEventListener('close',bF=>{bF.preventDefault();this.close()});bC===null||bC===void 0?void 0:bC.addEventListener('mousedown',bG=>{bG.preventDefault();bG.target===bC&&this.close()});var bD=this.querySelectorAll('img');for(const bH of bD)bH.addEventListener('click',()=>{b(this,s,'m',z).call(this,bH);this.showModal()})}attributeChangedCallback(bI,bJ,bK){var bL;if(bI==='open')if(this.hasAttribute('open'))return (bL=this.Dialog)===null||bL===void 0?void 0:bL.showModal()}}d=NidhuggImageModal,t=new WeakMap,u=new WeakMap,v=new WeakMap,w=new WeakMap,x=new WeakMap,y=new WeakMap,s=new WeakSet,z=function bN(bM){var bO,bP,_e;var F=document.createElement('figure'),H=document.createElement('figcaption');F.classList.add(b(this,v,'f'));var G=document.createElement('img');G.setAttribute('alt',bM.getAttribute('alt')||'');G.setAttribute('height',bM.getAttribute('height')||'');G.setAttribute('width',bM.getAttribute('width')||'');G.setAttribute('src',bM.getAttribute('src')||'');G.classList.add(b(this,w,'f'));F.appendChild(G);bM.dataset.caption&&(H.innerHTML=bM.dataset.caption,F.appendChild(H));var I=(bO=this.Dialog)===null||bO===void 0?void 0:bO.querySelector(`.${b(this,v,'f')}`);if(I)return (bP=this.Dialog)===null||bP===void 0?void 0:bP.replaceChild(F,I);(_e=this.Dialog)===null||_e===void 0?void 0:_e.appendChild(F)},aA=function bQ(){if(this.Dialog)return;var bR=document.createElement('dialog');bR.classList.add(b(this,u,'f'));bR.id=b(this,t,'f');bR.innerHTML=``;document.body.appendChild(bR)};NidhuggImageModal.observedAttributes=[];(()=>customElements.define('nidhugg-image-modal',d))();var b=this?.__classPrivateFieldGet||function(bS,bT,bU,f){if(bU==='a'&&!f)throw TypeError('Private accessor was defined without a getter');if(A(bT)?bS!==bT||!f:!bT.has(bS))throw TypeError('Cannot read private member from an object whose class did not declare it');return bU==='m'?f:bU==='a'?f.call(bS):f?f.value:bT.get(bS)};var d,aB,aC,aD,aE,aF,aG,aH;class NidhuggModal extends HTMLElement{constructor(){super();aB.set(this,'nidhugg-modal-open');aC.set(this,'nidhugg-modal__dialog');aD.set(this,'nidhugg-modal__header');aE.set(this,'nidhugg-modal__heading');aF.set(this,'nidhugg-modal__close-btn');aG.set(this,'nidhugg-modal__main');aH.set(this,b(this,aE,'f')+'--no-heading');this.close=this.close.bind(this);this.closeEvent=new CustomEvent('close', {bubbles:!0,cancelable:!1,composed:!0});this.cancelEvent=new CustomEvent('cancel', {bubbles:!0,cancelable:!1,composed:!0});this.openEvent=new CustomEvent('open', {bubbles:!0,cancelable:!1,composed:!0})}get Dialog(){return this.querySelector(`dialog.${b(this,aC,'f')}`)}open(){this.showModal()}showModal(){var bV=this.Dialog;bV&&(bV.showModal(),document.body.classList.add(b(this,aB,'f')),this.dispatchEvent(this.openEvent))}close(){var bW=this.Dialog;bW&&(bW.style.opacity='0',bW.style.transform='scale(0)',setTimeout(()=>{bW.close();bW.removeAttribute('open');document.body.classList.remove(b(this,aB,'f'));bW.style.opacity=bW.style.transform=''},300))}populateElements(){var bX=this.getAttribute('heading'),bY=this.childNodes,bZ=document.createElement('dialog'),_E=document.createElement('header'),_g=[...bY];bZ.classList.add(b(this,aC,'f'));var cA=document.createElement('h2');cA.classList.add(b(this,aE,'f'));cA.textContent=bX||'';_E.classList.add(b(this,aD,'f'));_E.innerHTML=`
			<form formmethod="dialog">
				<button class="${b(this,aF,'f')}" type="submit" title="Close modal" autofocus>
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M18 6a1 1 0 0 0-1.414 0L12 10.586 7.414 6A1 1 0 0 0 6 6a1 1 0 0 0 0 1.414L10.586 12 6 16.586A1 1 0 0 0 6 18a1 1 0 0 0 1.414 0L12 13.414 16.586 18A1 1 0 0 0 18 18a1 1 0 0 0 0-1.414L13.414 12 18 7.414A1 1 0 0 0 18 6Z"/></svg>
				</button>
			</form>`;bX?_E.appendChild(cA):_E.classList.add(b(this,aH,'f'));var _f=document.createElement('main');_f.classList.add(b(this,aG,'f'));_f.append(..._g);bZ.appendChild(_E);bZ.appendChild(_f);this.appendChild(bZ);this.hasAttribute('open')&&this.showModal()}connectedCallback(){this.populateElements();var cB=this.Dialog;cB===null||cB===void 0?void 0:cB.addEventListener('cancel',cC=>{cC.preventDefault();this.close();this.dispatchEvent(this.cancelEvent)});cB===null||cB===void 0?void 0:cB.addEventListener('close',cD=>{cD.preventDefault();this.close();this.dispatchEvent(this.closeEvent)});cB===null||cB===void 0?void 0:cB.addEventListener('mousedown',cE=>{cE.preventDefault();cE.target===cB&&this.close()})}attributeChangedCallback(cF,cG,cH){if(cF==='open')if(this.hasAttribute('open'))return this.showModal()}}d=NidhuggModal,aB=new WeakMap,aC=new WeakMap,aD=new WeakMap,aE=new WeakMap,aF=new WeakMap,aG=new WeakMap,aH=new WeakMap;NidhuggModal.observedAttributes=['open','heading'];(()=>customElements.define('nidhugg-modal',d))();