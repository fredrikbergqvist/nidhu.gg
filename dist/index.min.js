class NidhuggImageModal extends HTMLElement{static observedAttributes=[];static {customElements.define('nidhugg-image-modal',this)}#modalId='nidhugg-image-modal';#dialogClass=`${this.#modalId}__dialog`;#figureClass=`${this.#modalId}__figure`;#modalImageClass=`${this.#modalId}__img`;#captionClass=`${this.#modalId}__caption`;#modalOpenClass='nidhugg-modal-open';constructor(){super();this.close=this.close.bind(this);this.closeEvent=new CustomEvent('close', {bubbles:!0,cancelable:!1,composed:!0});this.cancelEvent=new CustomEvent('cancel', {bubbles:!0,cancelable:!1,composed:!0});this.openEvent=new CustomEvent('open', {bubbles:!0,cancelable:!1,composed:!0})}get Dialog(){return document.getElementById(this.#modalId)}open(){this.showModal()}showModal(){var a=this.Dialog;a&&(a.showModal(),document.body.classList.add(this.#modalOpenClass))}close(){var A=this.Dialog;A&&(A.style.opacity='0',A.style.transform='scale(0)',setTimeout(()=>{document.body.classList.remove(this.#modalOpenClass);A.style.opacity=A.style.transform='';A.close()},200))}#populateElements(){if(this.Dialog)return;var _=document.createElement('dialog');_.classList.add(this.#dialogClass);_.id=this.#modalId;_.innerHTML=`
			<figure class="${this.#figureClass}">
				<img class="${this.#modalImageClass}" src="#" alt="" />
				<figcaption class="${this.#captionClass}"></figcaption>
			</figure>`;document.body.appendChild(_)}connectedCallback(){this.#populateElements();var b=this.Dialog;b?.addEventListener('cancel',c=>{c.preventDefault();this.close()});b?.addEventListener('close',C=>{C.preventDefault();this.close()});b?.addEventListener('mousedown',_a=>{_a.preventDefault();_a.target===b&&this.close()});var B=this.querySelectorAll('img');for(const d of B)d.addEventListener('click',()=>{var D=this.Dialog.querySelector(`.${this.#modalImageClass}`),_b=this.Dialog.querySelector(`.${this.#captionClass}`);if(D){D.setAttribute('alt',d.getAttribute('alt'));D.setAttribute('height',d.getAttribute('height'));D.setAttribute('width',d.getAttribute('width'));D.setAttribute('src',d.getAttribute('src'));d.dataset.vertical&&D.classList.add('vertical');_b.innerHTML='';d.dataset.caption&&(_b.innerHTML=d.dataset.caption)}this.showModal()})}attributeChangedCallback(_A,_B,_c){}}class NidhuggModal extends HTMLElement{static observedAttributes=['open'];static {customElements.define('nidhugg-modal',this)}constructor(){super();this.close=this.close.bind(this);this.closeEvent=new CustomEvent('close', {bubbles:!0,cancelable:!1,composed:!0});this.cancelEvent=new CustomEvent('cancel', {bubbles:!0,cancelable:!1,composed:!0});this.openEvent=new CustomEvent('open', {bubbles:!0,cancelable:!1,composed:!0})}get Dialog(){return this.shadowRoot?.querySelector('dialog')}open(){this.showModal()}showModal(){var e=this.Dialog;e&&(e.showModal(),document.body.classList.add('nidhugg-modal-open'),this.shadowRoot.dispatchEvent(this.openEvent))}close(){var E=this.Dialog;E&&(E.style.opacity='0',E.style.transform='scale(0)',setTimeout(()=>{E.close();document.body.classList.remove('nidhugg-modal-open');E.style.opacity=E.style.transform=''},300))}populateElements(){var aA=document.createElement('template');var aB=`<style>
	.nidhugg-modal__dialog{
		display: none;
		transition: all 0.3s ease-in-out;
		opacity: 1;
		transform: scale(1);
		position: fixed;
		z-index: 10;
		width: max-content;
		padding: 0;
		background-color: var(--nidhugg-base-100, #2A303C);
		color: var(--nidhugg-base-content, #fefefe);
		border-radius: var(--nidhugg-rounded, 0.5rem);
		border: 2px solid var(--nidhugg-neutral, #1C212B);
		box-shadow: 0 0 1rem rgba(0, 0, 0, 0.5);
	}
	.nidhugg-modal__dialog[open]::backdrop {
		opacity: 0.6;
		background-color: #000;
	}
	.nidhugg-modal__dialog[open] {
		@starting-style{
			opacity: 0;
			transform: scale(0);
		}
		display: block;
	}
	.nidhugg-modal__dialog header {
		background-color: var(--nidhugg-base-300, #20252E);
		display: flex;
		flex-direction: row-reverse;
		justify-content: space-between;
		align-items: flex-start;
		padding: 1rem;
	}
	.nidhugg-modal__dialog button {
		background-color: var(--nidhugg-base-100, #2A303C);
		color: var(--nidhugg-base-content, #fefefe);
		transition: background-color, color 0.3s ease-in-out;
		border:none;
		border-radius: 50%;
		width: 2rem;
		height: 2rem;
		display: flex;
		justify-content: center;
		align-items: center;
		margin-top: -0.5rem;
		margin-right: -0.5rem;
		cursor: pointer;
		&:hover {
			color: var(--nidhugg-base-200, #242933);
			background-color: var(--nidhugg-base-content, #fefefe);
		}
	}

	.nidhugg-modal__dialog main {
		background-color: var(--nidhugg-base-100, #2A303C);
		padding: 0 1rem 1rem;
	}
	.nidhugg-modal__dialog footer {
		background-color: var(--nidhugg-base-100, #2A303C);
		padding: 1rem;
	}
</style>
`;aA.innerHTML=`${aB}
		<dialog class="nidhugg-modal__dialog" part="dialog">
			<div>
				<header part="header">

					<form formmethod="dialog">
						<button id="nidhugg-modal-close-btn" type="submit" title="Close modal" autofocus>x</button>
					</form>
					<slot name="header"></slot>
				</header>
				<main part="content" class="nid-modal__main">
					<slot name="content"></slot>
				</main>
				<footer part="footer" class="nid-modal__footer">
					<slot name="footer"></slot>
				</footer>
			</div>
		</dialog>`;this.shadowRoot?.appendChild(aA.content.cloneNode(!0));this.hasAttribute('open')&&this.showModal()}connectedCallback(){this.attachShadow({mode:'open'});this.populateElements();var aC=this.Dialog;aC?.addEventListener('cancel',aD=>{aD.preventDefault();this.close();this.shadowRoot.dispatchEvent(this.cancelEvent)});aC?.addEventListener('close',aE=>{aE.preventDefault();this.close();this.shadowRoot.dispatchEvent(this.closeEvent)});aC?.addEventListener('mousedown',aF=>{aF.preventDefault();aF.target===aC&&this.close()})}attributeChangedCallback(aG,aH,_C){var _d=this.shadowRoot?.querySelector('.nidhugg-modal__dialog');if(!_d)return;if(aG==='open')if(this.hasAttribute('open'))return _d.showModal()}}